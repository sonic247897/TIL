# 1장. 데이터베이스란

> 용도와 역할

## 1. 데이터베이스의 역할

**[데이터베이스의 기본 기능]**

> 데이터베이스는 주소록에서 시작되었다.

1. 데이터의 검색과 갱신

   : 데이터베이스에 요구되는 **가장 중요한 기능**은 `검색`이다. ('참조', '추출'로도 불린다)

   원하는 데이터를 빨리 끄집어낼 수 있어야 함.

   - 넓은 의미에서 갱신은 등록·수정·제거

     : 데이터베이스는 새로운 데이터를 등록하고 기존 데이터를 수정하며 불필요해진 데이터를 제거하는 것도 가능해야 한다.

     이 '등록, 수정, 제거' 3가지 기능을 통틀어 `갱신`이라고 한다.

     - 실제로는 갱신 중에서도 여러 데이터를 한 번에 등록하는 기능이나, 등록과 갱신을 합쳐 한 동작으로 취급하는 기능 등 갱신의 세세한 변형이 다수 있다.

     <img src="images/01_manipulation.PNG" style="zoom:80%;" />

   - 데이터 포맷에 유의한다

     : 데이터베이스를 조작할 때 중요한 것은 **데이터를 어떤 포맷(형식)으로 관리하는가, 검색이나 갱신에 효율적인가** 등의 문제이다.

     ex) 동성동명의 '홍길동'이 2명 있으면, 이름이 우연히 같다고 해도 2명은 다른 인물이므로 데이터베이스에서도 이 2명을 '다른 사람'이라는 것을 알도록 관리해야 한다. 이 원칙을 `고유성(Uniqueness)`이라고 한다.

   - 처리 성능에 유의한다

     : 검색이나 갱신에서 중요한 문제로 `성능`이 있다. 성능이란 '어느 정도의 빠르기로 처리 가능한가'란 것이다.

2. 동시성 제어

   : 데이터베이스는 동시에 복수의 사용자로부터 검색이나 갱신 처리를 받는다. 이때 문제 되는 것이 '`갱신의 무결성`을 어느정도 보장하는가?' 하는 점이다.

   => 데이터베이스의 사용자가 2명인 경우, PC의 주소록 파일을 동시에 열어서 주소를 갱신하려고 한다면 어떻게 될까?

   ​	동작은 다음 중 하나가 된다.

   ​	① 최초로 파일을 연 사람이 파일을 열고 있을 때, 그 다음으로 파일을 열려고 한 사람은 파일을 열 수 없다.

   ​	② 최초로 파일을 연 사람이 파일을 열고 있을 때, 그 다음으로 파일을 열려고 한 사람에게는 파일이 '읽기 전용Read Only'으로밖에 열리지 않는다.

   ​	③ 어떤 사람도 문제없이 파일을 여는 것이 가능하고 나중에 수행된 쪽의 갱신이 반영된다.

   ``` java
   ③과 같은 경우를 'Dirty Write'라고 한다. 더티 쓰기가 발생한 갱신 처리는 '남보다 늦게 손을 내밀어 이기는 가위바위보' 같은 것이다. 
   데이터베이스에서 이런 식의 제어는 일반적으로 데이터 무결성 관점에서 기피하는 경향이 있다.
   ```

   - 괴로운 트레이드오프의 관계

     : 나중에 파일을 연 사람의 시점에서 볼 때 ①이 행위 제한이 가장 심하고 ③이 가장 느슨하다.

     반면, 처음 파일을 연 사람의 시점에서 볼 때는 ③은 자신이 갱신하는 상황에 타인이 마음대로 갱신하려는 위험한 상황이고 ①이 가장 바람직하다.

     => 데이터베이스를 복수의 사용자가 동시에 공유하고 이용하려고 한다면 **같은 데이터를 갱신하는 상황에 대한 제어**가 필요하다.

     이렇게 복수 사용자의 갱신을 조절하기 위한 기능을 `동시성 제어` 또는 `배타 제어`라고 한다.

     - 실제 데이터베이스에서는 전체의 균형을 생각하면서 ①과 ②를 기준으로 한 동시성 제어가 수행되는 경우가 많다.

3. 장애 대응

   : 좀처럼 부서지기 어렵고 부서졌다 하더라도 복원할 수 있어야 한다.

   - 데이터 소실 문제의 대책

     - 데이터 다중화

       : 데이터를 한 곳이 아니라 복수의 장소에 **분산**해서 유지하는 것으로, 데이터가 완전하게 소실되는 것을 막는 방법, 즉 **예방책**.

     - 백업

       : 데이터 소실이 발생했을 때 데이터를 복원하는 방법으로 **사후대책**이라고 할 수 있다.

   - 왜 데이터 소실 사건이 끊이지 않는가

     : 그 이유는 엔지니어가 항상 '서비스 레벨'과 '비용'이란 트레이드오프의 딜레마로 고민하기 때문이다. 즉, 알고는 있지만 돈이 없는 상황.

4. 보안

   : 데이터베이스에 보존된 데이터를 어떻게 숨길 것인가.

   데이터베이스는 사용자로부터 가능한 보이지 않게 설계되고 있다. 여기에는 크게 2가지 이유가 있다.

   1) 사용자는 서버를 의식할 필요가 없다

   ​	: 사용자에게 가까운 기술이란 대다수가 클라이언트 기술 중심이라 서버의 기술은 그다지 의식되지 않기 때문이다.

   ​	사용자로서 시스템을 사용하면 직접 조작하는 것은 클라이언트(와 그 위에서 동작하는 프로그램) 뿐이고, 서버에 배치된 데이터베이스 등의 소프트웨어를 직접 조작하는 일은 없다. 만약 이게 가능하다면 '보안 구멍'이라는 시스템의 결함이라고 할 수 있다.

   2) 데이터베이스는 기밀성이 높다

   ​	: 데이터베이스에 들어있는 데이터는 기밀성이 높아서 일반에 공개할 수 없는 내용이 상당수 포함되어 있다.

   ​	**따라서 데이터베이스에 요구되는 보안은 매우 엄격하다**.



## 2. 데이터베이스의 종류

- 계층형 데이터베이스

  : **데이터를 계층 구조로 관리**하는 데이터베이스. 조직도를 상상하면 된다.
  
  이 타입의 데이터베이스는 현대적인 데이터베이스 역사상 최초로 등록된 것으로, 아직 현역으로 이용하고 있다.
  
- 관계형 데이터베이스

  : **2차원 표** 형식으로 데이터를 관리하는 데이터베이스로, 현재 가장 주류를 이루고 있다.

- 객체지향 데이터베이스와 XML 데이터베이스

  : 각각 '객체'와 'XML'이라는 형식으로 데이터를 관리하는 데이터베이스. 관계형 데이터베이스를 대체하기를 기대했지만, 아직 틈새시장에서 기반을 쌓고 있는 정도이다.

- NoSQL 데이터베이스

  : `Not only SQL`의 줄임말로써 SQL 뿐만 아니라 다른 것이 더 있다는 의미이다. 여기서 **SQL**이란 관계형 데이터베이스를 만들기 위한 언어를 의미한다.

  이 타입의 데이터베이스는 **관계형 데이터베이스에 있는 기능 일부를 버려서** 성능(처리 속도)을 높이고 있다.

  대량의 데이터를 고속으로 처리해야 하는 웹 서비스와 잘 맞아서 최근 자주 이용되고 있다.

